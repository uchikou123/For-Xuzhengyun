<!doctype html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>ÈÄÅÁªôËÆ∏Ê≠£‰∫ëÂ∞èÊúãÂèãÁöÑÂú£ËØûÊ†ë üéÑ</title>
<style>
  :root{
    --bg1:#fff7fb;
    --bg2:#fff3e9;
    --tree-green1:#4fd18a;
    --tree-green2:#2ea86b;
    --accent:#ff7ab6;
    --star:#ffd86b;
  }
  html,body{height:100%;margin:0;font-family: "PingFang SC","Hiragino Sans GB","Helvetica Neue",Arial, sans-serif; background:linear-gradient(180deg,var(--bg1),var(--bg2)); color:#333; -webkit-font-smoothing:antialiased}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:18px;box-sizing:border-box;position:relative;overflow:hidden}

  /* top-right message */
  .present {
    position: fixed;
    right: 14px;
    top: 12px;
    background:rgba(255,255,255,0.9);
    border:1px solid rgba(0,0,0,0.06);
    padding:8px 12px;
    border-radius:14px;
    box-shadow:0 6px 18px rgba(50,50,93,0.08);
    font-weight:700;
    color:#333;
    z-index:40;
    font-size:14px;
    display:flex;
    gap:8px;
    align-items:center;
  }

  /* card */
  .card {
    width:min(860px,96vw);
    max-width:920px;
    height:min(1050px,92vh);
    background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,250,245,0.9));
    border-radius:20px;
    box-shadow: 0 20px 40px rgba(26,32,48,0.12);
    display:flex;
    justify-content:center;
    align-items:center;
    position:relative;
    overflow:hidden;
    padding:18px;
  }

  /* ground and gifts */
  .ground {
    position:absolute;
    left:0;right:0;bottom:0;height:18%;
    background:linear-gradient(180deg,#ffffff, #fff5f5);
    box-shadow: inset 0 6px 18px rgba(0,0,0,0.02);
    display:flex;align-items:flex-end;justify-content:center;padding-bottom:18px;
  }
  .gifts{display:flex;gap:12px;transform:translateY(6px)}
  .gift{width:64px;height:50px;border-radius:8px;display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(0,0,0,0.08)}
  .gift .ribbon{position:absolute;height:8px;width:60%;background:rgba(255,255,255,0.9);border-radius:4px}

  /* cute tree */
  .stage { width:100%; max-width:640px; display:flex; align-items:flex-end; justify-content:center; position:relative; padding-bottom:10vh; }
  .tree-wrap { width:76%; max-width:420px; position:relative; transform-origin:center; }

  /* star */
  .star {
    position:absolute; left:50%; transform:translateX(-50%); top:-2.4rem;
    width:72px;height:72px; border-radius:50%;
    background: radial-gradient(circle at 35% 30%, #fff7d6, #ffd76b 45%, #ffb84b 100%);
    filter:drop-shadow(0 6px 14px rgba(255,180,50,0.25));
    display:flex;align-items:center;justify-content:center;
    animation: starPulse 2000ms infinite ease-in-out;
  }
  @keyframes starPulse{0%{transform:translateX(-50%) scale(1)}50%{transform:translateX(-50%) scale(1.07)}100%{transform:translateX(-50%) scale(1)}}

  /* layers are soft rounded triangles using pseudo elements */
  .tree {
    width:100%; max-width:380px; margin:0 auto; position:relative; padding-top:2.6rem;
  }
  .layer {
    width:100%; height:0;
    border-left: 45% solid transparent;
    border-right: 45% solid transparent;
    margin:0 auto;
    position:relative;
    filter: drop-shadow(0 10px 18px rgba(0,0,0,0.08));
    border-bottom-left-radius:60%;
    border-bottom-right-radius:60%;
  }
  .layer.one { border-bottom: 150px solid var(--tree-green2); transform:translateY(8px) }
  .layer.two { border-bottom: 120px solid var(--tree-green1); margin-top:-36px; transform:translateY(6px) }
  .layer.three { border-bottom: 90px solid #76e4a1; margin-top:-30px; transform:translateY(4px) }
  /* trunk */
  .trunk { width:70px;height:64px;background:linear-gradient(180deg,#7b4f39,#5b2d1a);border-radius:8px;margin:10px auto 0;box-shadow:0 6px 12px rgba(0,0,0,0.12) }

  /* ornaments (cute circles with little shine) */
  .ornament {
    position:absolute; width:16px;height:16px;border-radius:50%;box-shadow:0 6px 12px rgba(0,0,0,0.08), inset 0 2px 4px rgba(255,255,255,0.6);
    display:flex;align-items:center;justify-content:center; color:#fff; font-size:10px;
    transition: transform 180ms ease;
  }
  .ornament:active{ transform:scale(1.15) }
  .ornament.small{ width:12px;height:12px;font-size:8px }
  .ornament.pink{ background:linear-gradient(180deg,#ff8ccf,#ff5da8) }
  .ornament.yellow{ background:linear-gradient(180deg,#ffd76e,#ffb84b) }
  .ornament.blue{ background:linear-gradient(180deg,#6bcfff,#2a9fff) }
  .ornament.green{ background:linear-gradient(180deg,#99ffcc,#42d18f) }

  /* cute lights (glowing dots with soft halo) */
  .light {
    position:absolute;width:10px;height:10px;border-radius:50%;
    box-shadow: 0 0 8px rgba(255,255,255,0.9);
    transform-origin:center;
  }
  .light.red{ background:#ff6b8a; box-shadow:0 0 14px rgba(255,107,138,0.35) }
  .light.cyan{ background:#6bf0ff; box-shadow:0 0 14px rgba(107,240,255,0.35) }
  .light.gold{ background:#ffd76e; box-shadow:0 0 14px rgba(255,215,110,0.35) }

  /* floating hearts for cuteness */
  .heart {
    position:absolute; width:18px;height:18px; transform:rotate(-45deg);
    background:linear-gradient(180deg,#ff7ab6,#ff4d9a);
    border-radius:4px;
    box-shadow:0 8px 20px rgba(255,90,130,0.12);
    opacity:0.95;
    display:flex;align-items:center;justify-content:center;
    clip-path: path("M10 3 C7 0 0 0 0 6 C0 11 10 16 10 16 C10 16 20 11 20 6 C20 0 13 0 10 3 Z");
    animation: floatUp 4200ms linear infinite;
  }
  @keyframes floatUp { from{ transform:translateY(0) rotate(-45deg) } to{ transform:translateY(-86px) rotate(-45deg); opacity:0 } }

  /* controls bottom-right */
  .controls { position:fixed; right:12px; bottom:12px; display:flex; gap:8px; z-index:50 }
  .btn { background:#fff;padding:8px 10px;border-radius:999px;border:1px solid rgba(0,0,0,0.06); box-shadow:0 8px 18px rgba(0,0,0,0.06); font-weight:600; font-size:13px }

  /* responsive */
  @media (max-width:420px){
    .present{ font-size:13px; padding:6px 10px; top:8px; right:8px }
    .star{ width:56px;height:56px; top:-1.8rem }
    .layer.one{ border-bottom:120px solid var(--tree-green2) }
    .layer.two{ border-bottom:100px solid var(--tree-green1) }
    .layer.three{ border-bottom:72px solid #76e4a1 }
  }

</style>
</head>
<body>
  <div class="present">üéÅ ÈÄÅÁªôËÆ∏Ê≠£‰∫ëÂ∞èÊúãÂèãÁöÑÂú£ËØûÊ†ëÔºÅ</div>

  <div class="wrap">
    <div class="card" id="card" role="application" aria-label="ÂèØÁà±Âú£ËØûÊ†ë">
      <div class="stage">
        <div class="tree-wrap" id="treeWrap">
          <div class="star" aria-hidden="true">‚òÖ</div>

          <div class="tree" id="tree">
            <div class="layer one" id="layer1"></div>
            <div class="layer two" id="layer2"></div>
            <div class="layer three" id="layer3"></div>
            <div class="trunk"></div>
          </div>
        </div>
      </div>

      <div class="ground" aria-hidden="true">
        <div class="gifts">
          <div class="gift" style="background:linear-gradient(180deg,#ffd2f0,#ff7ab6); position:relative">
            <div style="width:24px;height:24px;border-radius:6px;background:rgba(255,255,255,0.9)"></div>
          </div>
          <div class="gift" style="background:linear-gradient(180deg,#fff2a8,#ffcf6e); position:relative">
            <div style="width:24px;height:24px;border-radius:6px;background:rgba(255,255,255,0.9)"></div>
          </div>
          <div class="gift" style="background:linear-gradient(180deg,#b6eeff,#6bcfff); position:relative">
            <div style="width:24px;height:24px;border-radius:6px;background:rgba(255,255,255,0.9)"></div>
          </div>
        </div>
      </div>

      <div class="controls" aria-hidden="true">
        <button class="btn" id="toggleLights">üîÜ ÁÅØÂÖâ</button>
        <button class="btn" id="toggleMusic">üéµ Èü≥‰πê</button>
      </div>
    </div>
  </div>

<script>
/* ---------- helper: place ornaments & lights ---------- */
const tree = document.getElementById('tree');
const wrap = document.getElementById('treeWrap');

function placeItem(parent, cls, xPercent, yOffsetPx){
  const el = document.createElement('div');
  el.className = cls;
  // position relative to tree-wrap center
  const w = wrap.clientWidth;
  // center position
  el.style.left = (50 + (xPercent)) + '%';
  el.style.top = (yOffsetPx) + 'px';
  parent.appendChild(el);
  return el;
}

/* randomized ornaments positions for cuteness */
const ornamentsConfig = [
  {cls:'ornament pink', x:-14, y:-30},
  {cls:'ornament yellow', x:8, y:-18},
  {cls:'ornament blue', x:18, y:28},
  {cls:'ornament green', x:-20, y:60},
  {cls:'ornament pink small', x:6, y:100},
  {cls:'ornament blue small', x:-8, y:150},
  {cls:'ornament yellow', x:22, y:80},
  {cls:'ornament green small', x:-28, y:200},
  {cls:'ornament pink', x:14, y:170},
  {cls:'ornament blue', x:-12, y:260},
];

ornamentsConfig.forEach((c,i)=>{
  const el = document.createElement('div');
  el.className = c.cls + ' ornament';
  el.style.left = `calc(50% + ${c.x}px)`;
  el.style.top = `${c.y}px`;
  // small random wiggle
  el.animate([{transform:'translateY(0px)'},{transform:'translateY(6px)'},{transform:'translateY(0px)'}], {duration:1800+Math.random()*1200, iterations:Infinity, delay:i*120});
  tree.appendChild(el);
});

/* cute lights */
const lightsConfig = [
  {cls:'light red', x:-34, y:30},
  {cls:'light cyan', x: -6, y:10},
  {cls:'light gold', x: 26, y:40},
  {cls:'light red', x: 10, y:120},
  {cls:'light cyan', x: -22, y:160},
  {cls:'light gold', x: 34, y:200},
  {cls:'light red', x: -8, y:240},
  {cls:'light cyan', x: 18, y:300}
];
lightsConfig.forEach((c, idx)=>{
  const el = document.createElement('div');
  el.className = c.cls;
  el.style.left = `calc(50% + ${c.x}px)`;
  el.style.top = `${c.y}px`;
  el.style.opacity = 0.98;
  el.style.transition = 'transform 140ms linear, opacity 180ms';
  tree.appendChild(el);
  // breathing animation
  el.animate([{transform:'scale(.8)', opacity:0.6},{transform:'scale(1.2)', opacity:1}], {duration:900+Math.random()*800, iterations:Infinity, delay: idx*120});
});

/* floating hearts to add cute feeling */
function spawnHeart(){
  const h = document.createElement('div');
  h.className = 'heart';
  // random horizontal under star area
  const left = 40 + Math.random()*20;
  h.style.left = left + '%';
  h.style.top = (wrap.getBoundingClientRect().top + 50 + Math.random()*40) + 'px';
  h.style.animationDuration = (3600 + Math.random()*2000) + 'ms';
  document.body.appendChild(h);
  setTimeout(()=> h.remove(), 4200);
}
setInterval(spawnHeart, 1100);

/* tiny snow (emoji) */
function spawnSnow(){
  const s = document.createElement('div');
  s.className = 'snow';
  s.style.position='fixed';
  s.style.left = Math.random()*100 + 'vw';
  s.style.top = '-10px';
  s.style.fontSize = (10 + Math.random()*18) + 'px';
  s.style.opacity = 0.9;
  s.innerText = '‚ùÑ';
  s.style.transition = 'transform 6s linear, opacity 6s';
  document.body.appendChild(s);
  requestAnimationFrame(()=> s.style.transform = 'translateY(110vh)');
  setTimeout(()=> s.remove(), 6200);
}
setInterval(spawnSnow, 220);

/* ---------- lights toggle ---------- */
let lightsOn = true;
document.getElementById('toggleLights').addEventListener('click',(e)=>{
  e.stopPropagation();
  lightsOn = !lightsOn;
  document.querySelectorAll('.light').forEach((el, i)=>{
    el.style.opacity = lightsOn ? '1' : '0.12';
  });
  document.querySelectorAll('.ornament').forEach((el)=>{
    el.style.transform = lightsOn ? 'scale(1)' : 'scale(0.9)';
    el.style.opacity = lightsOn ? '1' : '0.6';
  });
});

/* ---------- simple background melody using WebAudio ---------- */
let audioCtx=null, playing=false, playInterval=null;
const toggleMusicBtn = document.getElementById('toggleMusic');
toggleMusicBtn.addEventListener('click', async (ev)=>{
  ev.stopPropagation();
  if(!audioCtx){ audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }
  if(!playing){
    if(audioCtx.state === 'suspended') await audioCtx.resume();
    startMusic();
  } else {
    stopMusic();
  }
});

function startMusic(){
  playing = true;
  toggleMusicBtn.textContent = '‚è∏Ô∏è Èü≥‰πê';
  const notes = [523.25, 659.25, 783.99, 1046.5]; // C5 E5 G5 C6
  let idx = 0;
  playInterval = setInterval(()=>{
    const t = audioCtx.currentTime;
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'sine';
    o.frequency.value = notes[idx % notes.length] * (Math.random()<0.12?0.5:1);
    g.gain.value = 0;
    o.connect(g); g.connect(audioCtx.destination);
    o.start(t);
    g.gain.linearRampToValueAtTime(0.08, t+0.02);
    g.gain.linearRampToValueAtTime(0.0001, t+0.9);
    o.stop(t+1.05);
    idx++;
  }, 420);
}

function stopMusic(){
  playing = false;
  toggleMusicBtn.textContent = 'üéµ Èü≥‰πê';
  clearInterval(playInterval);
}

/* accessibility: tap whole card to toggle lights */
document.getElementById('card').addEventListener('click', (e)=>{
  if(e.target.closest('.btn')) return;
  document.getElementById('toggleLights').click();
});

/* pause audio/animations when hidden */
document.addEventListener('visibilitychange', ()=>{
  if(document.hidden){
    if(audioCtx && audioCtx.state === 'running') audioCtx.suspend();
  }else{
    if(audioCtx && audioCtx.state === 'suspended' && playing) audioCtx.resume();
  }
});

/* small entrance bounce */
window.addEventListener('load', ()=>{
  const card = document.querySelector('.card');
  card.animate([{transform:'translateY(12px) scale(.98)'},{transform:'translateY(0px) scale(1)'}],{duration:520, easing:'cubic-bezier(.2,.8,.2,1)'});
});
</script>
</body>
</html>
